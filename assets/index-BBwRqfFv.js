(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();class D{constructor(e,s,i,n,o,r){this.slides=e,this.slideTrack=s,this.prevBtn=i,this.nextBtn=n,this.sliderElement=o,this.slideIndex=0,this.intervalId=null,this.slideInterval=r,this.init()}init(){this.slides.length>0&&(this.updateSlidePosition(),this.prevBtn.addEventListener("click",()=>this.prevSlide()),this.nextBtn.addEventListener("click",()=>this.nextSlide()),this.sliderElement.addEventListener("mouseenter",()=>this.pauseAutoSlide()),this.sliderElement.addEventListener("mouseleave",()=>this.startAutoSlide()),this.slides.length===1?this.sliderElement.classList.add("single-image"):this.startAutoSlide())}updateSlidePosition(){this.slideTrack.style.transform=`translateX(-${this.slideIndex*100}%)`}prevSlide(){this.slides.length<=1||(this.pauseAutoSlide(),this.slideIndex<=0?this.slideIndex=this.slides.length-1:this.slideIndex--,this.updateSlidePosition(),this.startAutoSlide())}nextSlide(){this.slides.length<=1||(this.pauseAutoSlide(),this.slideIndex>=this.slides.length-1?this.slideIndex=0:this.slideIndex++,this.updateSlidePosition(),this.startAutoSlide())}startAutoSlide(){this.slides.length<=1||(this.pauseAutoSlide(),this.intervalId=setInterval(()=>this.nextSlide(),this.slideInterval))}pauseAutoSlide(){clearInterval(this.intervalId)}}class H{constructor(e,s,i,n,o,r=4e3){this.slides=e,this.slideTrack=s,this.prevBtn=i,this.nextBtn=n,this.sliderElement=o,this.navContainer=o.querySelector(".modal__slider-nav"),this.slideIndex=0,this.intervalId=null,this.slideInterval=r,this.init()}init(){this.slides.length>0&&(this.updateSlidePosition(),this.createNavigation(),this.prevBtn.addEventListener("click",()=>this.prevSlide()),this.nextBtn.addEventListener("click",()=>this.nextSlide()),this.setupZoomEffect(),this.setupClickToFullscreen(),this.sliderElement.addEventListener("mouseenter",()=>this.pauseAutoSlide()),this.sliderElement.addEventListener("mouseleave",()=>this.startAutoSlide()),this.sliderElement.setAttribute("tabindex","0"),this.sliderElement.addEventListener("keydown",e=>this.handleKeyDown(e)),this.slides.length===1?this.sliderElement.classList.add("single-image"):this.startAutoSlide())}createNavigation(){this.navContainer.innerHTML="",this.slides.forEach((e,s)=>{const i=document.createElement("div");i.className="modal__slider-nav__item",s===0&&i.classList.add("active");const n=document.createElement("img");n.src=e.src,n.alt=`Thumbnail ${s+1}`,i.appendChild(n),i.addEventListener("click",()=>this.goToSlide(s)),this.navContainer.appendChild(i)})}updateSlidePosition(){this.slideTrack.style.transform=`translateX(-${this.slideIndex*100}%)`,this.navContainer&&this.navContainer.querySelectorAll(".modal__slider-nav__item").forEach((s,i)=>{i===this.slideIndex?s.classList.add("active"):s.classList.remove("active")})}goToSlide(e){this.slides.length<=1||(this.pauseAutoSlide(),this.slideIndex=e,this.updateSlidePosition(),this.startAutoSlide())}prevSlide(){this.slides.length<=1||(this.pauseAutoSlide(),this.slideIndex--,this.slideIndex<0&&(this.slideIndex=this.slides.length-1),this.updateSlidePosition(),this.startAutoSlide())}nextSlide(){this.slides.length<=1||(this.pauseAutoSlide(),this.slideIndex++,this.slideIndex>=this.slides.length&&(this.slideIndex=0),this.updateSlidePosition(),this.startAutoSlide())}startAutoSlide(){this.slides.length<=1||(this.pauseAutoSlide(),this.intervalId=setInterval(()=>this.nextSlide(),this.slideInterval))}pauseAutoSlide(){clearInterval(this.intervalId)}setupZoomEffect(){this.slides.forEach(e=>{e.addEventListener("mousemove",function(s){const i=this.getBoundingClientRect(),n=s.clientX-i.left,o=s.clientY-i.top,r=n/i.width*100,d=o/i.height*100;this.style.transformOrigin=`${r}% ${d}%`,this.style.transform="scale(1.5)"}),e.addEventListener("mouseleave",function(){this.style.transform="scale(1)",this.style.transformOrigin="center center"})})}setupClickToFullscreen(){this.slides.forEach((e,s)=>{e.addEventListener("click",()=>{this.openFullscreen(s)})})}openFullscreen(e){const s=document.getElementById("fullscreenModal"),i=document.getElementById("fullscreenSlideTrack"),n=document.getElementById("fullscreenNav");A(),i.innerHTML="",n.innerHTML="",this.slides.forEach((r,d)=>{const h=document.createElement("img");h.className="fullscreen-slide",h.src=r.src,h.alt=r.alt,i.appendChild(h);const c=document.createElement("div");c.className="fullscreen-nav-item",d===e&&c.classList.add("active");const p=document.createElement("img");p.src=r.src,p.alt=`Thumbnail ${d+1}`,c.appendChild(p),c.addEventListener("click",()=>{o.goToSlide(d)}),n.appendChild(c)});const o=new F(i.querySelectorAll(".fullscreen-slide"),i,document.querySelector(".fullscreen-prev"),document.querySelector(".fullscreen-next"),document.querySelector(".fullscreen-slider"),e);s.classList.add("active"),s.removeAttribute("inert"),s.setAttribute("aria-hidden","false"),s.addEventListener("click",r=>{r.target===s&&this.closeFullscreen()}),document.addEventListener("keydown",r=>{r.key==="Escape"&&this.closeFullscreen()}),document.getElementById("fullscreenClose").addEventListener("click",()=>{this.closeFullscreen()})}closeFullscreen(){const e=document.getElementById("fullscreenModal");e.classList.remove("active"),e.setAttribute("aria-hidden","true"),e.setAttribute("inert",""),C()}handleKeyDown(e){if(document.activeElement===this.sliderElement)switch(e.key){case"ArrowLeft":e.preventDefault(),this.prevSlide();break;case"ArrowRight":e.preventDefault(),this.nextSlide();break}}}class F{constructor(e,s,i,n,o,r=0){this.slides=e,this.slideTrack=s,this.prevBtn=i,this.nextBtn=n,this.sliderElement=o,this.navContainer=document.getElementById("fullscreenNav"),this.slideIndex=r,this.init()}init(){this.slides.length>0&&(this.updateSlidePosition(),this.prevBtn.addEventListener("click",()=>this.prevSlide()),this.nextBtn.addEventListener("click",()=>this.nextSlide()),document.addEventListener("keydown",e=>this.handleKeyDown(e)))}updateSlidePosition(){this.slideTrack.style.transform=`translateX(-${this.slideIndex*100}%)`,this.navContainer&&this.navContainer.querySelectorAll(".fullscreen-nav-item").forEach((s,i)=>{i===this.slideIndex?s.classList.add("active"):s.classList.remove("active")})}goToSlide(e){this.slides.length<=1||(this.slideIndex=e,this.updateSlidePosition())}prevSlide(){this.slides.length<=1||(this.slideIndex--,this.slideIndex<0&&(this.slideIndex=this.slides.length-1),this.updateSlidePosition())}nextSlide(){this.slides.length<=1||(this.slideIndex++,this.slideIndex>=this.slides.length&&(this.slideIndex=0),this.updateSlidePosition())}handleKeyDown(e){if(document.getElementById("fullscreenModal").classList.contains("active"))switch(e.key){case"ArrowLeft":e.preventDefault(),this.prevSlide();break;case"ArrowRight":e.preventDefault(),this.nextSlide();break}}}function j(){const t=document.createElement("div");return t.className="product__item skeleton",t.innerHTML=`
    <div class="product__item__img">
      <div class="product__item__img__label skeleton-text short"></div>
      <div class="product-slider">
        <div class="product-slides-container">
          <div class="product-slide-track">
            <div class="skeleton-img skeleton"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="product__item__info">
      <h3 class="product__item__info__title"><div class="skeleton skeleton-text long"></div></h3>
      <p class="product__item__info__description"><div class="skeleton skeleton-text mid"></div></p>
      <div class="product__item__info__characteristics">
        <div class="product__item__info__weight"><div class="skeleton skeleton-text short"></div></div>
        <div class="product__item__info__price"><div class="skeleton skeleton-text short"></div></div>
      </div>
      <div style="margin-top:8px;"><div class="skeleton skeleton-text short"></div></div>
    </div>
  `,t.setAttribute("aria-hidden","true"),t}function R(t,e=6){if(!t)return;t.innerHTML="";for(let i=0;i<e;i++)t.appendChild(j());t.setAttribute("aria-busy","true");let s=document.getElementById("products-status");s||(s=document.createElement("div"),s.id="products-status",s.className="visually-hidden",s.setAttribute("role","status"),s.textContent="Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø­ØµÙˆÙ„Ø§Øª",t.parentElement?.appendChild(s))}function O(t){if(!t)return;t.removeAttribute("aria-busy");const e=document.getElementById("products-status");e&&(e.textContent="Ù…Ø­ØµÙˆÙ„Ø§Øª Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯Ù†Ø¯")}function U(){const t=document.createElement("div");return t.className="contact__info__item skeleton skeleton-placeholder",t.setAttribute("data-skeleton","true"),t.innerHTML=`
    <div class="contact__info__item__info">
      <div class="contact__info__item__img skeleton-circle skeleton" aria-hidden="true"></div>
      <div class="contact__info__item__desc">
        <h4 class="contact__info__item__desc__title"><div class="skeleton-text mid skeleton" aria-hidden="true"></div></h4>
        <p class="contact__info__item__desc__subtitle"><div class="skeleton-text short skeleton" aria-hidden="true"></div></p>
      </div>
    </div>
    <div style="margin-left:auto"><div class="skeleton-text short skeleton" aria-hidden="true"></div></div>
  `,t.setAttribute("aria-hidden","true"),t}function z(t,e,s,i,n=4){if(t){t.innerHTML="";for(let d=0;d<n;d++)t.appendChild(U());t.setAttribute("aria-busy","true");let r=document.getElementById("contacts-status");r||(r=document.createElement("div"),r.id="contacts-status",r.className="visually-hidden",r.setAttribute("role","status"),r.textContent="Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÙ…Ø§Ø³",t.parentElement?.appendChild(r))}function o(r,d=3){if(r){r.textContent="";for(let h=0;h<d;h++){const c=document.createElement("span");c.className="skeleton-circle skeleton skeleton-placeholder",c.setAttribute("data-skeleton","true"),c.setAttribute("aria-hidden","true"),r.appendChild(c)}}}o(e,4),o(s,3),o(i,3)}function K(t,e,s,i){const n=o=>{if(!o)return;o.querySelectorAll('[data-skeleton="true"]').forEach(d=>d.remove())};if(n(t),n(e),n(s),n(i),t){t.removeAttribute("aria-busy");const o=document.getElementById("contacts-status");o&&(o.textContent="Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÙ…Ø§Ø³ Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø´Ø¯")}}const V='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>';class Y{constructor(e=document.getElementById("toaster"),s={}){this.container=e,this.opts=Object.assign({position:"top-right",maxToasts:6},s),this.toasts=new Set,document.addEventListener("visibilitychange",()=>{document.hidden?this.toasts.forEach(i=>i.pause("visibility")):this.toasts.forEach(i=>i.resume("visibility"))})}show({title:e="",message:s="",type:i="info",duration:n=5e3}={}){if(this.container.children.length>=this.opts.maxToasts){const r=this.container.firstElementChild;r&&r.__toastInstance&&r.__toastInstance.remove(!0)}const o=new J(this,{title:e,message:s,type:i,duration:n});return this.toasts.add(o),this.container.appendChild(o.el),requestAnimationFrame(()=>o.el.classList.add("show")),o.promise.finally(()=>this.toasts.delete(o)),o}}class J{constructor(e,{title:s,message:i,type:n,duration:o}){this.manager=e,this.title=s,this.message=i,this.type=n,this.duration=Math.max(200,o||4e3),this.remaining=this.duration,this.startTime=null,this.timer=null,this.pausedReasons=new Set,this._createElement(),this._wireEvents(),this.promise=new Promise(r=>{this._resolveRemoved=r}),this._start()}_createElement(){const e=document.createElement("div");e.className=`toast toast--${this.type}`,e.setAttribute("role","status"),e.setAttribute("tabindex","0"),e.__toastInstance=this,e.innerHTML=`
      <div class="toast__body">
        <div inert class="toast__icon" aria-hidden="true">${this._iconForType(this.type)}</div>
        <div class="toast__content">
          <div class="toast__title">${this.title}</div>
          <p class="toast__message">${this.message}</p>
        </div>
        <div class="toast__actions">
          <button class="toast__close" aria-label="Dismiss notification">${V}</button>
        </div>
      </div>
      <div inert class="toast__timebar" aria-hidden="true">
        <div class="progress"></div>
      </div>
    `;const s=e.querySelector(".progress");s.style.background="linear-gradient(90deg, rgba(255,255,255,0.12), rgba(255,255,255,0.02)), var(--accent)",s.style.animation=`deplete ${this.duration}ms linear forwards`,this.el=e,this.progressEl=s,this.closeBtn=e.querySelector(".toast__close")}_wireEvents(){this._mouseenter=()=>this.pause("hover"),this._mouseleave=()=>this.resume("hover"),this._focus=()=>this.pause("focus"),this._blur=()=>this.resume("focus"),this.el.addEventListener("mouseenter",this._mouseenter),this.el.addEventListener("mouseleave",this._mouseleave),this.el.addEventListener("focusin",this._focus),this.el.addEventListener("focusout",this._blur),this.closeBtn.addEventListener("click",()=>this.remove()),this._keyHandler=e=>{e.key==="Escape"&&this.remove()},this.el.addEventListener("keydown",this._keyHandler)}_start(){this.startTime=performance.now(),this._setTimer(this.remaining)}_setTimer(e){this.timer&&clearTimeout(this.timer),this.timer=setTimeout(()=>this.remove(),e)}pause(e="manual"){if(this.pausedReasons.has(e)||!this.startTime)return;const s=performance.now()-this.startTime;this.remaining=Math.max(0,this.remaining-s),this.pausedReasons.add(e),this.timer&&(clearTimeout(this.timer),this.timer=null),this.el.classList.add("paused"),this.startTime=null}resume(e="manual"){this.pausedReasons.has(e)&&(this.pausedReasons.delete(e),!(this.pausedReasons.size>0)&&(this.startTime=performance.now(),this._setTimer(this.remaining),this.el.classList.remove("paused")))}remove(e=!1){if(!this.el)return this.promise;this.timer&&clearTimeout(this.timer),this.timer=null;const s=()=>{try{this._teardown()}catch{}this._resolveRemoved()};if(e)this.el.remove(),s(),this.el=null;else{this.el.classList.remove("show"),this.el.classList.add("hide");const i=n=>{n.target===this.el&&(this.el.removeEventListener("transitionend",i),this.el&&this.el.remove(),s(),this.el=null)};this.el.addEventListener("transitionend",i),setTimeout(()=>{if(this.el){try{this.el.remove()}catch{}s(),this.el=null}},600)}return this.promise}_teardown(){this.el&&(this.el.removeEventListener("mouseenter",this._mouseenter),this.el.removeEventListener("mouseleave",this._mouseleave),this.el.removeEventListener("focusin",this._focus),this.el.removeEventListener("focusout",this._blur),this.el.removeEventListener("keydown",this._keyHandler),this.timer&&clearTimeout(this.timer))}_iconForType(e){switch(e){case"success":return'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5"/></svg>';case"error":return'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-shield-alert-icon lucide-shield-alert"><path d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"/><path d="M12 8v4"/><path d="M12 16h.01"/></svg>';case"warn":return'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="12"/><line x1="12" x2="12.01" y1="16" y2="16"/></svg>';case"info":return'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-info-icon lucide-info"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>';default:return""}}}const X=new Y;function f(t){return X.show(t)}const I="products_json_cache",W=1800*1e3,Z="https://res.cloudinary.com/dxjjr0dte/raw/upload/tea-site-data/products.json",b="#product-modal",S=".custom-modal__content",G="[data-modal-backdrop]",Q="[data-modal-close]",ee=".product-slider",te=".product-slide-track",se=".product-slide",ie=".product-prev",ne=".product-next",re=".modal__slider",oe=".modal__slide-track",ae=".modal__slide",le=".modal__slides-prev",de=".modal__slides-next";async function N(){const t=document.querySelector("#products .product__items");try{const e=localStorage.getItem(I),s=Date.now();if(e){const d=JSON.parse(e);if(d.ts&&s-d.ts<W&&d.data){console.log("Using cached products"),T(d.data);return}}t&&R(t,6),console.log("Fetching fresh products.json from CDN...");const i=new AbortController,n=setTimeout(()=>i.abort(),1e4),o=await fetch(Z,{cache:"no-cache",signal:i.signal});if(clearTimeout(n),!o.ok)throw new Error(`HTTP error! Status: ${o.status}`);const r=await o.json();localStorage.setItem(I,JSON.stringify({ts:s,data:r})),t&&O(t),T(r);return}catch(e){console.error("Failed to load products:",e),t&&(t.innerHTML='<div class="load-error">Ù…Ø´Ú©Ù„ÛŒ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø­ØµÙˆÙ„Ø§Øª Ø¨Ù‡ ÙˆØ¬ÙˆØ¯ Ø¢Ù…Ø¯. <button id="retry-products" class="custom-btn-1">ØªÙ„Ø§Ø´ Ù…Ø¬Ø¯Ø¯</button></div>',document.getElementById("retry-products")?.addEventListener("click",()=>N()),f({title:"Ø®Ø·Ø§ Ø¯Ø± Ø§ØªØµØ§Ù„",message:"Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ø­ØµÙˆÙ„Ø§Øª Ù†Ø§Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯.",type:"error",duration:5e3}))}}function T(t){const e=document.querySelector("#products .product__items");if(!e){console.warn("generateProducts: #products .product__items not found in DOM.");return}if(e.innerHTML="",!Array.isArray(t)||t.length===0){console.warn("generateProducts: products.json is empty or not an array.");return}t.forEach(s=>{if(!s.visible)return;const i=document.createElement("div");i.className="product__item",i.innerHTML=`
            <div class="product__item__img">
                <div class="product__item__img__label">${s.category}</div>
                <div class="product-slider">
                  <div class="product-slides-container">
                    <div class="product-slide-track">
                      ${s.image.map(o=>`
                      <img class="product-slide" src="${o}" alt="${s.name}">
                      `).join("")}
                    </div>
                  </div>
                  <button class="product-prev"><span>&#10095;</span></button>
                  <button class="product-next"><span>&#10094;</span></button>
                </div>
            </div>
            <div class="product__item__info">
                <h3 class="product__item__info__title">${s.name}</h3>
                <p class="product__item__info__description">${s.description}</p>
                <div class="product__item__info__characteristics">
                  <div aria-label="package-icon" class="product__item__info__weight">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path
                        d="M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z">
                        </path>
                        <path d="M12 22V12"></path>
                        <path d="m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7"></path>
                        <path d="m7.5 4.27 9 5.15"></path>
                    </svg>
                    <span class="product__item__info__weight__title">${s.weight}</span>
                  </div>
                  <div class="product__item__info__price">
                  <span class="product__item__info__price__title" dir="ltr">${new Intl.NumberFormat("fa-IR",{maximumSignificantDigits:3}).format(s.price)}</span>
                  <span class="product__item__info__price__unit">ØªÙˆÙ…Ø§Ù†</span>
                  </div>
                </div>
                <button aria-label="eye-icon, show product details, open product modal" class="product__item__info__cta-details custom-btn-1" type="button" data-id="${s.id}" data-title="${s.name}">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path
                    d="M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0">
                    </path>
                    <circle cx="12" cy="12" r="3"></circle>
                </svg>
                Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¬Ø²Ø¦ÛŒØ§Øª
                </button>
    `,e.appendChild(i),new D(i.querySelectorAll(se),i.querySelector(te),i.querySelector(ie),i.querySelector(ne),i.querySelector(ee),4e3),i.querySelector(".product__item__info__cta-details").addEventListener("click",o=>{o.preventDefault(),ce(s)})})}function ce(t){const e=document.querySelector(b),s=document.querySelector(S);if(!e){console.warn("openProductModal: "+b+" not found.");return}e.setAttribute("aria-labelledby",t.name);const i=document.createElement("button");i.classList="custom-modal__close",i.type="button",i.ariaLabel="Close dialog",i.setAttribute("data-modal-close",""),i.innerHTML=`
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
           <path d="M18 6 6 18"></path>
           <path d="m6 6 12 12"></path>
         </svg>
  `;const n=document.createElement("div");n.className="modal__image__section";const o=`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                  stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <circle cx="12" cy="12" r="10" />
                  <path d="m9 12 2 2 4-4" />
                </svg>`;n.innerHTML=`
        <div class="modal__slider">
          <div class="modal__slides-container">
            <div class="modal__slide-track">
              ${t.image.map(c=>`
                    <img class="modal__slide" src="${c}" alt="${t.name}">
                `).join("")}
            </div>
            <button class="modal__slides-prev"><span>&#10094;</span></button>
            <button class="modal__slides-next"><span>&#10095;</span></button>
          </div>

          <div class="modal__slider-nav">

          </div>
        </div>
        `;const r=document.createElement("div");r.className="modal__product__details",r.innerHTML=`
        <h3 class="modal__product-title">${t.name}</h4>
          <p class="modal__product-desc">
            ${t.description}
          </p>
          <div class="modal__product-category-weight">
            <p class="modal__product-category">Ø¯Ø³ØªÙ‡ Ø¨Ù†Ø¯ÛŒ: <span>${t.category}</span></p>
            <p class="modal__product-weight">ÙˆØ²Ù†: <span>${t.weight}</span></p>
          </div>
          <div class="modal__product-feats-chars__grid">
            <div class="modal__product-chars__section">
              <strong class="modal__product-chars-title">Ù…Ø´Ø®ØµØ§Øª</strong>
              <div class="modal__product-chars">
                ${t.characteristics.length==0?"Ù…Ø´Ø®ØµØ§ØªÛŒ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ù…Ø­ØµÙˆÙ„ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.":t.characteristics.map(c=>`
                              <div class="modal__product-characteristic">â€¢ ${c}</div>
                `).join("")}
              </div>
            </div>
            <div class="modal__product-feats__section">
              <strong class="modal__product-feats-title">ÙˆÛŒÚ˜Ú¯ÛŒ Ù‡Ø§</strong>
              <div class="modal__product-feats">
              ${t.features.length==0?"Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ù…Ø­ØµÙˆÙ„ ÙˆÛŒÚ˜Ú¯ÛŒ Ø§ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.":t.features.map(c=>`
                              <div aria-label="circle-checkmark-icon, product feature" class="modal__product-feature">
                              ${o}
                              ${c}
                              </div>
                `).join("")}
              </div>
            </div>
          </div>
          <div class="modal__price-cta">
            <a aria-label="tel-icon, contact to order" href="#contact" data-modal-close class="modal__product-contact custom-btn-1">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path
                  d="M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384">
                </path>
              </svg>
              <span>ØªÙ…Ø§Ø³ Ø¨Ø±Ø§ÛŒ Ø³ÙØ§Ø±Ø´</span>
            </a>
            <h4 class="modal__product-price">${new Intl.NumberFormat("fa-IR",{maximumSignificantDigits:3}).format(t.price)} ØªÙˆÙ…Ø§Ù†</h4>
          </div>
        `,A(),s.setAttribute("aria-label",`${t.name} modal`),s.appendChild(i),s.appendChild(n),new H(n.querySelectorAll(ae),n.querySelector(oe),n.querySelector(le),n.querySelector(de),n.querySelector(re),4e3),s.appendChild(r),me(),e.classList.add("open"),s.classList.add("fadeInDown-animation","animation"),e.setAttribute("aria-hidden","false"),e.removeAttribute("inert");const d=e.querySelector(S),h=ue(d)||d;try{h.focus()}catch{}}function y(){const t=document.querySelector(b);if(!t){console.warn("closeProductModal: "+b+" not found.");return}const e=document.querySelector(S);C(),t.classList.remove("open"),e.classList.remove("fadeInDown-animation","animation"),e.textContent="",t.setAttribute("aria-hidden","true"),t.setAttribute("inert","")}function ue(t){if(!t)return null;const e=t.querySelectorAll('a[href], button:not([disabled]), textarea:not([disabled]), input:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex="-1"])');return e.length?e[0]:null}function he(t){const e=document.querySelector(b);if(!e||!e.classList.contains("open"))return;const s=e.querySelector(S),i=Array.from(s.querySelectorAll('a[href], button:not([disabled]), textarea:not([disabled]), input:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex="-1"])')).filter(r=>r.offsetParent!==null);if(i.length===0){document.activeElement!==s&&s.focus(),t.key==="Tab"&&t.preventDefault();return}const n=i[0],o=i[i.length-1];!t.shiftKey&&t.target===o&&t.key==="Tab"?(t.preventDefault(),n.focus()):t.shiftKey&&t.target===n&&t.key==="Tab"&&(t.preventDefault(),o.focus())}function me(){const t=document.querySelector(b);if(!t)return;t.querySelectorAll(Q).forEach(s=>s.addEventListener("click",()=>y()));const e=t.querySelector(G);e?e.addEventListener("click",()=>y()):t.addEventListener("click",s=>{const i=t.querySelector(S);s.target===t&&y(),i&&!i.contains(s.target)&&y()}),document.addEventListener("keydown",s=>{t.classList.contains("open")&&(s.key==="Escape"?(s.preventDefault(),y()):s.key==="Tab"&&he(s))}),t.classList.contains("open")?(t.setAttribute("aria-hidden","true"),t.setAttribute("inert","")):(t.setAttribute("aria-hidden","false"),t.hasAttribute("inert")&&t.removeAttribute("inert"))}const q="contacts_json_cache",pe=1800*1e3,fe="https://res.cloudinary.com/dxjjr0dte/raw/upload/tea-site-data/contacts.json";async function B(){const t=document.querySelector(".contact__info__items"),e=document.querySelector(".footer__contact__items"),s=document.querySelector(".header__socials"),i=document.querySelector(".mobile-nav__socials");try{const n=localStorage.getItem(q),o=Date.now();if(n){const p=JSON.parse(n);if(p.ts&&o-p.ts<pe&&p.data){console.log("Using cached contacts"),$(p.data);return}}z(t,e,s,i,6);const r=new AbortController,d=setTimeout(()=>r.abort(),8e3);console.log("Fetching fresh contacts.json from CDN...");const h=await fetch(fe,{cache:"no-cache",signal:r.signal});if(clearTimeout(d),!h.ok)throw new Error(`HTTP error! Status: ${h.status}`);const c=await h.json();localStorage.setItem(q,JSON.stringify({ts:o,data:c})),K(t),$(c);return}catch(n){console.error("Failed to load contacts:",n),t&&(t.innerHTML='<div class="load-error">Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø±Ø§Ù‡ Ù‡Ø§ÛŒ Ø§Ø±ØªØ¨Ø§Ø·ÛŒ. <button id="retry-contacts" class="custom-btn-1">ØªÙ„Ø§Ø´ Ù…Ø¬Ø¯Ø¯</button></div>',document.getElementById("retry-contacts")?.addEventListener("click",()=>B())),f({title:"Ø®Ø·Ø§ Ø¯Ø± Ø§ØªØµØ§Ù„",message:"Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø±Ø§Ù‡ Ù‡Ø§ÛŒ Ø§Ø±ØªØ¨Ø§Ø·ÛŒ Ù†Ø§Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯.",type:"error",duration:5e3})}}function $(t){const e=document.querySelector(".contact__info__items"),s=document.querySelector(".footer__contact__items"),i=document.querySelector(".footer__social__items"),n=document.querySelector(".header__socials"),o=document.querySelector(".mobile-nav__socials");e&&(e.textContent=""),s&&(s.textContent=""),i&&(i.textContent=""),n&&(n.textContent=""),o&&(o.textContent=""),t.forEach(r=>{if(!r.visible)return;const d=ve(r),h=d&&/^https?:\/\//.test(d),c=document.createElement("a");if(c.className="contact__info__item",c.setAttribute("aria-label",r.name+" "+r.value),c.href=d||"javascript:void(0)",h&&(c.target="_blank"),c.rel="noopener noreferrer",c.innerHTML=`
      <div class="contact__info__item__info"> 
        <div aria-label="${r.type}-icon" class="contact__info__item__img">${r.svg}</div>
                <div class="contact__info__item__desc">
                  <h4 class="contact__info__item__desc__title">${r.name}</h4>
                  <p class="contact__info__item__desc__subtitle" dir="${r.valueDir}">${r.value}</p>
                </div>
      </div>
      <button class="contact__info__item__copy" aria-label="Ú©Ù¾ÛŒ">Ú©Ù¾ÛŒ</button>
        `,c.querySelector(".contact__info__item__copy").addEventListener("click",m=>{if(m.preventDefault(),navigator.clipboard&&navigator.clipboard.writeText){const a=`<span dir="${r.valueDir}">${r.value}</span>`;navigator.clipboard.writeText(r.value).then(f({title:"Ú©Ù¾ÛŒ Ø´Ø¯!",message:`Ù…ØªÙ† '${a}' Ø¯Ø± Ú©Ù„ÛŒÙ¾ Ø¨ÙˆØ±Ø¯ Ø´Ù…Ø§ Ú©Ù¾ÛŒ Ø´Ø¯.`,type:"info",duration:3e3}))}else{const a=document.createElement("textarea");a.value=text,a.setAttribute("readonly",""),a.style.position="absolute",a.style.left="-9999px",document.body.appendChild(a),a.select();try{const l=document.execCommand("copy");f(l?{title:"Ú©Ù¾ÛŒ Ø´Ø¯!",message:`Ù…ØªÙ† '${r.value}' Ø¯Ø± Ú©Ù„ÛŒÙ¾ Ø¨ÙˆØ±Ø¯ Ø´Ù…Ø§ Ú©Ù¾ÛŒ Ø´Ø¯.`,type:"info",duration:3e3}:{title:"Ú©Ù¾ÛŒ Ù†Ø´Ø¯!",message:"Ú©Ù¾ÛŒ Ø´Ú©Ø³Øª Ø®ÙˆØ±Ø¯.",type:"error",duration:5e3})}catch(l){f({title:"Ú©Ù¾ÛŒ Ù†Ø´Ø¯!",message:`Ú©Ù¾ÛŒ Ø´Ú©Ø³Øª Ø®ÙˆØ±Ø¯.<br>${l}`,type:"error",duration:5e3}),console.error(`Copying ${r.value} failed. -> ${l}`)}document.body.removeChild(a)}}),e.appendChild(c),r.type=="telegram"||r.type=="whatsapp"||r.type=="instagram"){const m=E(r,"footer__social__item",d,h);m.innerHTML=r.svg,i.appendChild(m);const a=E(r,"header__social__item",d,h);a.innerHTML=r.svg,n.appendChild(a);const l=E(r,"mobile-nav__social__item",d,h);l.innerHTML=r.svg,o.appendChild(l)}else{const m=E(r,"footer__contact__item",d,h);m.innerHTML=`
            ${r.svg}
            <span dir="${r.valueDir}">${r.value}</span>
        `,s.appendChild(m)}})}function E(t,e,s,i){const n=document.createElement("a");return n.classList=e,n.setAttribute("aria-label",t.name+" "+t.value),n.href=s||"javascript:void(0)",i&&(n.target="_blank"),n.rel="noopener noreferrer",n}function ve(t){if(!t||!t.type)return null;switch(t.type){case"tel":return`tel:${String(t.value).replace(/\s+/g,"")}`;case"email":return`mailto:${t.value}`;case"instagram":{const e=String(t.value).replace(/^@+/,"").trim();return e?`https://instagram.com/${encodeURIComponent(e)}`:null}case"telegram":{const e=String(t.value).replace(/^@+/,"").trim();return e?`https://t.me/${encodeURIComponent(e)}`:null}case"whatsapp":{const e=String(t.value).replace(/^@+/,"").trim();return e?`https://wa.me/${encodeURIComponent(e)}`:null}case"address":return`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(t.value)}`;case"workhour":return null;default:return null}}function _e(){const t=document.getElementById("orderForm");if(!t)return;t.setAttribute("novalidate","novalidate");const e={shopName:t.querySelector('[name="entry.2033700216"]'),phone:t.querySelector('[name="entry.68392148"]'),products:t.querySelector('[name="entry.1952081265"]'),address:t.querySelector('[name="entry.1217595251"]'),notes:t.querySelector('[name="entry.422124854"]'),honeypot:t.querySelector('[name="hidden_hp"]')};function s(a){const l=a.closest(".contact__form__item");return l?l.querySelector(".field-error"):null}function i(a,l){const u=s(a);u&&(u.textContent=l),a.setAttribute("aria-invalid","true")}function n(a){const l=s(a);l&&(l.textContent=""),a.removeAttribute("aria-invalid")}function o(){Object.values(e).forEach(a=>{a&&a.tagName&&n(a)})}function r(a){if(a==null)return"";let l=String(a).trim();return l.startsWith("+")&&(l=l.slice(1)),l=l.replace(/\D/g,""),l.startsWith("00")&&(l=l.replace(/^00/,"")),l}function d(a){return a?!!(/^98(9\d{9})$/.test(a)||/^09(9\d{9})$/.test(a)||/^9\d{9}$/.test(a)):!1}function h(a){return!a||d(a)?!1:!!(/^0\d{9,10}$/.test(a)||/^98\d{9,11}$/.test(a)||/^\d{7,8}$/.test(a))}function c(a){const l=r(a);return l?d(l)?{ok:!0,type:"mobile",normalized:l}:h(l)?{ok:!0,type:"landline",normalized:l}:{ok:!1,message:"ÙØ±Ù…Øª Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³ Ù…Ø¹ØªØ¨Ø± Ù†ÛŒØ³Øª. Ù…Ø«Ø§Ù„â€ŒÙ‡Ø§ÛŒ Ù…Ø¬Ø§Ø²: ...0912, ...912, ...912 98+, 02112345678"}:{ok:!1,message:"Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯."}}function p(a,l=250){let u=null;return function(...w){clearTimeout(u),u=setTimeout(()=>a.apply(this,w),l)}}const m=e.phone;if(m){const l=p(()=>{const u=c(m.value);u.ok?n(m):i(m,u.message)},200);m.addEventListener("input",l),m.addEventListener("blur",()=>{const u=c(m.value);u.ok?n(m):(i(m,u.message),f({title:"Ø´Ù…Ø§Ø±Ù‡ Ù†Ø§Ù…Ø¹ØªØ¨Ø±",message:'ÙØ±Ù…Øª Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³ Ù…Ø¹ØªØ¨Ø± Ù†ÛŒØ³Øª. Ù…Ø«Ø§Ù„ Ù‡Ø§ÛŒ Ù…Ø¬Ø§Ø²:  <span dir="ltr">0912... - 912... - +98 912... - 02112345678</span>',type:"warn",duration:4e3}))})}["shopName","products","address","notes"].forEach(a=>{const l=e[a];l&&l.addEventListener("input",()=>n(l))}),t.addEventListener("submit",function(a){if(e.honeypot&&e.honeypot.value.trim()){a.preventDefault(),f({title:"Ø®Ø·Ø§",message:"Ø¹Ù…Ù„ÛŒØ§Øª Ø¨Ù‡ Ø¯Ù„ÛŒÙ„ Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ø§Ø³Ù¾Ù… Ø§Ù†Ø¬Ø§Ù… Ù†Ø´Ø¯.",type:"error",duration:5e3});return}o();let l=!0,u=null;(!e.shopName||!e.shopName.value.trim())&&(i(e.shopName,"Ù†Ø§Ù… ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯."),l=!1,u=u||e.shopName);const w=c(e.phone?e.phone.value:"");if(w.ok||(i(e.phone,w.message),l=!1,u=u||e.phone),(!e.products||!e.products.value.trim()||e.products.value.trim().length<3)&&(i(e.products,"Ù…Ø­ØµÙˆÙ„/Ù…Ù‚Ø¯Ø§Ø± Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯. (Ø­Ø¯Ø§Ù‚Ù„ 3 Ø­Ø±Ù)"),l=!1,u=u||e.products),(!e.address||!e.address.value.trim()||e.address.value.trim().length<5)&&(i(e.address,"Ø¢Ø¯Ø±Ø³ Ø±Ø§ Ú©Ø§Ù…Ù„ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯. (Ø­Ø¯Ø§Ù‚Ù„ 5 Ø­Ø±Ù)"),l=!1,u=u||e.address),!l){a.preventDefault(),u&&typeof u.focus=="function"&&u.focus();const P=s(u)?.textContent||"Ù„Ø·ÙØ§Ù‹ Ù…ÙˆØ§Ø±Ø¯ Ø®ÙˆØ§Ø³ØªÙ‡ Ø´Ø¯Ù‡ Ø±Ø§ ØªÚ©Ù…ÛŒÙ„ Ú©Ù†ÛŒØ¯.";f({title:"Ø®Ø·Ø§",message:P,type:"error",duration:4500});return}const k=this.querySelector('button[type="submit"]');k&&(k.disabled=!0),setTimeout(()=>{f({title:"Ø³ÙØ§Ø±Ø´ Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯",message:"Ù…Ù…Ù†ÙˆÙ† Ø§Ø² Ø§ÛŒÙ†Ú©Ù‡ Ù…Ø§ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ø±Ø¯ÛŒØ¯ğŸ™‡.<br> Ø¯Ø± Ø¸Ø±Ù 24 Ø³Ø§Ø¹Øª Ø¨Ø§ Ø´Ù…Ø§ ØªÙ…Ø§Ø³ Ø®ÙˆØ§Ù‡ÛŒÙ… Ú¯Ø±ÙØª.",type:"success",duration:5e3}),k&&(k.disabled=!1),this.reset(),o()},1200)})}const L=document.querySelector(".header__bars"),_=document.querySelector(".mobile-nav__menu"),ge="[data-mobile-nav-close]";function be(){_.classList.add("show"),L.setAttribute("aria-expanded","true"),_.setAttribute("aria-hidden","false"),_.hasAttribute("inert")&&_.removeAttribute("inert"),A()}function ye(){_.classList.remove("show"),L.setAttribute("aria-expanded","false"),_.setAttribute("aria-hidden","true"),_.setAttribute("inert",""),C()}function Se(){L.addEventListener("click",()=>be()),document.querySelectorAll(ge).forEach(t=>{t.addEventListener("click",()=>ye())}),_.setAttribute("inert",""),_.setAttribute("aria-hidden","true")}const g=document.querySelector(".scroll-top");document.addEventListener("DOMContentLoaded",async()=>{ke(),Se(),await N(),await B(),_e()});let x=!1;function we(){x||(x=!0,requestAnimationFrame(()=>{window.scrollY>50?Ee(g):xe(g),x=!1}))}function ke(){g&&(g.setAttribute("aria-hidden","true"),g.setAttribute("inert",""),g.setAttribute("tabindex","-1")),window.addEventListener("scroll",we,{passive:!0}),g?.addEventListener("click",t=>{t.preventDefault(),window.matchMedia("(prefers-reduced-motion: reduce)").matches?window.scrollTo(0,0):window.scrollTo({top:0,behavior:"smooth"}),g.blur()})}function Ee(t){t.classList.contains("visible")||(t.classList.add("visible"),t.setAttribute("aria-hidden","false"),t.removeAttribute("inert"),t.removeAttribute("tabindex"))}function xe(t){t.classList.contains("visible")&&(t.classList.remove("visible"),t.setAttribute("aria-hidden","true"),t.setAttribute("inert",""),t.setAttribute("tabindex","-1"),t.blur())}const Le=document.querySelectorAll("section"),Ae=document.querySelectorAll("header nav a"),Ce=document.querySelectorAll(".mobile-nav__link");function Ie(){let t="";Le.forEach(e=>{const s=e.offsetTop,i=e.clientHeight;pageYOffset>=s-i/3&&(t=e.getAttribute("id"))}),Ae.forEach(e=>{e.classList.remove("active"),e.getAttribute("href")===`#${t}`&&e.classList.add("active")}),Ce.forEach(e=>{e.classList.remove("active"),e.getAttribute("href")===`#${t}`&&e.classList.add("active")})}window.addEventListener("scroll",Ie);const v=document.querySelector(".header");document.querySelector(".footer");const M=document.querySelector(".main-content"),Te=document.querySelector(".footer-sentinel");function qe(t){return t?t.querySelector('a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])'):null}const $e=new IntersectionObserver(t=>{t.forEach(e=>{e.isIntersecting?Me():Ne()})},{root:null,threshold:0});$e.observe(Te);function Me(){if(v.classList.contains("hidden"))return;const t=document.activeElement;if(v.contains(t)){const e=qe(M)||M;try{e.focus({preventScroll:!0})}catch{}}v.classList.add("hidden"),v.setAttribute("aria-hidden","true"),v.setAttribute("inert","")}function Ne(){v.classList.contains("hidden")&&(v.classList.remove("hidden"),v.setAttribute("aria-hidden","false"),v.removeAttribute("inert"))}function A(){document.body.setAttribute("data-scroll-locked","1"),document.body.style.overflow="hidden"}function C(){document.body.removeAttribute("data-scroll-locked"),document.body.style.removeProperty("overflow")}
