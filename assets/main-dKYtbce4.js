/* empty css              */(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();class j{constructor(t,s,i,n,o,r){this.slides=t,this.slideTrack=s,this.prevBtn=i,this.nextBtn=n,this.sliderElement=o,this.slideIndex=0,this.intervalId=null,this.slideInterval=r,this.init()}init(){this.slides.length>0&&(this.updateSlidePosition(),this.prevBtn.addEventListener("click",()=>this.prevSlide()),this.nextBtn.addEventListener("click",()=>this.nextSlide()),this.sliderElement.addEventListener("mouseenter",()=>this.pauseAutoSlide()),this.sliderElement.addEventListener("mouseleave",()=>this.startAutoSlide()),this.slides.length===1?this.sliderElement.classList.add("single-image"):this.startAutoSlide())}updateSlidePosition(){this.slideTrack.style.transform=`translateX(-${this.slideIndex*100}%)`}prevSlide(){this.slides.length<=1||(this.pauseAutoSlide(),this.slideIndex<=0?this.slideIndex=this.slides.length-1:this.slideIndex--,this.updateSlidePosition(),this.startAutoSlide())}nextSlide(){this.slides.length<=1||(this.pauseAutoSlide(),this.slideIndex>=this.slides.length-1?this.slideIndex=0:this.slideIndex++,this.updateSlidePosition(),this.startAutoSlide())}startAutoSlide(){this.slides.length<=1||(this.pauseAutoSlide(),this.intervalId=setInterval(()=>this.nextSlide(),this.slideInterval))}pauseAutoSlide(){clearInterval(this.intervalId)}}class D{constructor(t,s,i,n,o,r=4e3){this.slides=t,this.slideTrack=s,this.prevBtn=i,this.nextBtn=n,this.sliderElement=o,this.navContainer=o.querySelector(".modal__slider-nav"),this.slideIndex=0,this.intervalId=null,this.slideInterval=r,this.init()}init(){this.slides.length>0&&(this.updateSlidePosition(),this.createNavigation(),this.prevBtn.addEventListener("click",()=>this.prevSlide()),this.nextBtn.addEventListener("click",()=>this.nextSlide()),this.setupZoomEffect(),this.setupClickToFullscreen(),this.sliderElement.addEventListener("mouseenter",()=>this.pauseAutoSlide()),this.sliderElement.addEventListener("mouseleave",()=>this.startAutoSlide()),this.sliderElement.setAttribute("tabindex","0"),this.sliderElement.addEventListener("keydown",t=>this.handleKeyDown(t)),this.slides.length===1?this.sliderElement.classList.add("single-image"):this.startAutoSlide())}createNavigation(){this.navContainer.innerHTML="",this.slides.forEach((t,s)=>{const i=document.createElement("div");i.className="modal__slider-nav__item",s===0&&i.classList.add("active");const n=document.createElement("img");n.src=t.src,n.alt=`Thumbnail ${s+1}`,i.appendChild(n),i.addEventListener("click",()=>this.goToSlide(s)),this.navContainer.appendChild(i)})}updateSlidePosition(){this.slideTrack.style.transform=`translateX(-${this.slideIndex*100}%)`,this.navContainer&&this.navContainer.querySelectorAll(".modal__slider-nav__item").forEach((s,i)=>{i===this.slideIndex?s.classList.add("active"):s.classList.remove("active")})}goToSlide(t){this.slides.length<=1||(this.pauseAutoSlide(),this.slideIndex=t,this.updateSlidePosition(),this.startAutoSlide())}prevSlide(){this.slides.length<=1||(this.pauseAutoSlide(),this.slideIndex--,this.slideIndex<0&&(this.slideIndex=this.slides.length-1),this.updateSlidePosition(),this.startAutoSlide())}nextSlide(){this.slides.length<=1||(this.pauseAutoSlide(),this.slideIndex++,this.slideIndex>=this.slides.length&&(this.slideIndex=0),this.updateSlidePosition(),this.startAutoSlide())}startAutoSlide(){this.slides.length<=1||(this.pauseAutoSlide(),this.intervalId=setInterval(()=>this.nextSlide(),this.slideInterval))}pauseAutoSlide(){clearInterval(this.intervalId)}setupZoomEffect(){this.slides.forEach(t=>{t.addEventListener("mousemove",function(s){const i=this.getBoundingClientRect(),n=s.clientX-i.left,o=s.clientY-i.top,r=n/i.width*100,c=o/i.height*100;this.style.transformOrigin=`${r}% ${c}%`,this.style.transform="scale(1.5)"}),t.addEventListener("mouseleave",function(){this.style.transform="scale(1)",this.style.transformOrigin="center center"})})}setupClickToFullscreen(){this.slides.forEach((t,s)=>{t.addEventListener("click",()=>{this.openFullscreen(s)})})}openFullscreen(t){const s=document.getElementById("fullscreenModal"),i=document.getElementById("fullscreenSlideTrack"),n=document.getElementById("fullscreenNav");L(),i.innerHTML="",n.innerHTML="",this.slides.forEach((r,c)=>{const u=document.createElement("img");u.className="fullscreen-slide",u.src=r.src,u.alt=r.alt,i.appendChild(u);const d=document.createElement("div");d.className="fullscreen-nav-item",c===t&&d.classList.add("active");const p=document.createElement("img");p.src=r.src,p.alt=`Thumbnail ${c+1}`,d.appendChild(p),d.addEventListener("click",()=>{o.goToSlide(c)}),n.appendChild(d)});const o=new H(i.querySelectorAll(".fullscreen-slide"),i,document.querySelector(".fullscreen-prev"),document.querySelector(".fullscreen-next"),document.querySelector(".fullscreen-slider"),t);s.classList.add("active"),s.removeAttribute("inert"),s.setAttribute("aria-hidden","false"),s.addEventListener("click",r=>{r.target===s&&this.closeFullscreen()}),document.addEventListener("keydown",r=>{r.key==="Escape"&&this.closeFullscreen()}),document.getElementById("fullscreenClose").addEventListener("click",()=>{this.closeFullscreen()})}closeFullscreen(){const t=document.getElementById("fullscreenModal");t.classList.remove("active"),t.setAttribute("aria-hidden","true"),t.setAttribute("inert",""),C()}handleKeyDown(t){if(document.activeElement===this.sliderElement)switch(t.key){case"ArrowLeft":t.preventDefault(),this.prevSlide();break;case"ArrowRight":t.preventDefault(),this.nextSlide();break}}}class H{constructor(t,s,i,n,o,r=0){this.slides=t,this.slideTrack=s,this.prevBtn=i,this.nextBtn=n,this.sliderElement=o,this.navContainer=document.getElementById("fullscreenNav"),this.slideIndex=r,this.init()}init(){this.slides.length>0&&(this.updateSlidePosition(),this.prevBtn.addEventListener("click",()=>this.prevSlide()),this.nextBtn.addEventListener("click",()=>this.nextSlide()),document.addEventListener("keydown",t=>this.handleKeyDown(t)))}updateSlidePosition(){this.slideTrack.style.transform=`translateX(-${this.slideIndex*100}%)`,this.navContainer&&this.navContainer.querySelectorAll(".fullscreen-nav-item").forEach((s,i)=>{i===this.slideIndex?s.classList.add("active"):s.classList.remove("active")})}goToSlide(t){this.slides.length<=1||(this.slideIndex=t,this.updateSlidePosition())}prevSlide(){this.slides.length<=1||(this.slideIndex--,this.slideIndex<0&&(this.slideIndex=this.slides.length-1),this.updateSlidePosition())}nextSlide(){this.slides.length<=1||(this.slideIndex++,this.slideIndex>=this.slides.length&&(this.slideIndex=0),this.updateSlidePosition())}handleKeyDown(t){if(document.getElementById("fullscreenModal").classList.contains("active"))switch(t.key){case"ArrowLeft":t.preventDefault(),this.prevSlide();break;case"ArrowRight":t.preventDefault(),this.nextSlide();break}}}function R(){const e=document.createElement("div");return e.className="product__item skeleton",e.innerHTML=`
    <div class="product__item__img">
      <div class="product__item__img__label skeleton-text short"></div>
      <div class="product-slider">
        <div class="product-slides-container">
          <div class="product-slide-track">
            <div class="skeleton-img skeleton"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="product__item__info">
      <h3 class="product__item__info__title"><div class="skeleton skeleton-text long"></div></h3>
      <p class="product__item__info__description"><div class="skeleton skeleton-text mid"></div></p>
      <div class="product__item__info__characteristics">
        <div class="product__item__info__weight"><div class="skeleton skeleton-text short"></div></div>
        <div class="product__item__info__price"><div class="skeleton skeleton-text short"></div></div>
      </div>
      <div style="margin-top:8px;"><div class="skeleton skeleton-text short"></div></div>
    </div>
  `,e.setAttribute("aria-hidden","true"),e}function O(e,t=6){if(!e)return;e.innerHTML="";for(let i=0;i<t;i++)e.appendChild(R());e.setAttribute("aria-busy","true");let s=document.getElementById("products-status");s||(s=document.createElement("div"),s.id="products-status",s.className="visually-hidden",s.setAttribute("role","status"),s.textContent="در حال بارگذاری محصولات",e.parentElement?.appendChild(s))}function z(e){if(!e)return;e.removeAttribute("aria-busy");const t=document.getElementById("products-status");t&&(t.textContent="محصولات بارگذاری شدند")}function K(){const e=document.createElement("div");return e.className="contact__info__item skeleton skeleton-placeholder",e.setAttribute("data-skeleton","true"),e.innerHTML=`
    <div class="contact__info__item__info">
      <div class="contact__info__item__img skeleton-circle skeleton" aria-hidden="true"></div>
      <div class="contact__info__item__desc">
        <h4 class="contact__info__item__desc__title"><div class="skeleton-text mid skeleton" aria-hidden="true"></div></h4>
        <p class="contact__info__item__desc__subtitle"><div class="skeleton-text short skeleton" aria-hidden="true"></div></p>
      </div>
    </div>
    <div style="margin-left:auto"><div class="skeleton-text short skeleton" aria-hidden="true"></div></div>
  `,e.setAttribute("aria-hidden","true"),e}function U(e,t,s,i,n=4){if(e){e.innerHTML="";for(let c=0;c<n;c++)e.appendChild(K());e.setAttribute("aria-busy","true");let r=document.getElementById("contacts-status");r||(r=document.createElement("div"),r.id="contacts-status",r.className="visually-hidden",r.setAttribute("role","status"),r.textContent="در حال بارگذاری اطلاعات تماس",e.parentElement?.appendChild(r))}function o(r,c=3){if(r){r.textContent="";for(let u=0;u<c;u++){const d=document.createElement("span");d.className="skeleton-circle skeleton skeleton-placeholder",d.setAttribute("data-skeleton","true"),d.setAttribute("aria-hidden","true"),r.appendChild(d)}}}o(t,4),o(s,3),o(i,3)}function J(e,t,s,i){const n=o=>{if(!o)return;o.querySelectorAll('[data-skeleton="true"]').forEach(c=>c.remove())};if(n(e),n(t),n(s),n(i),e){e.removeAttribute("aria-busy");const o=document.getElementById("contacts-status");o&&(o.textContent="اطلاعات تماس بارگیری شد")}}const V='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>';class Y{constructor(t=document.getElementById("toaster"),s={}){this.container=t,this.opts=Object.assign({position:"top-right",maxToasts:6},s),this.toasts=new Set,document.addEventListener("visibilitychange",()=>{document.hidden?this.toasts.forEach(i=>i.pause("visibility")):this.toasts.forEach(i=>i.resume("visibility"))})}show({title:t="",message:s="",type:i="info",duration:n=5e3}={}){if(this.container.children.length>=this.opts.maxToasts){const r=this.container.firstElementChild;r&&r.__toastInstance&&r.__toastInstance.remove(!0)}const o=new X(this,{title:t,message:s,type:i,duration:n});return this.toasts.add(o),this.container.appendChild(o.el),requestAnimationFrame(()=>o.el.classList.add("show")),o.promise.finally(()=>this.toasts.delete(o)),o}}class X{constructor(t,{title:s,message:i,type:n,duration:o}){this.manager=t,this.title=s,this.message=i,this.type=n,this.duration=Math.max(200,o||4e3),this.remaining=this.duration,this.startTime=null,this.timer=null,this.pausedReasons=new Set,this._createElement(),this._wireEvents(),this.promise=new Promise(r=>{this._resolveRemoved=r}),this._start()}_createElement(){const t=document.createElement("div");t.className=`toast toast--${this.type}`,t.setAttribute("role","status"),t.setAttribute("tabindex","0"),t.__toastInstance=this,t.innerHTML=`
      <div class="toast__body">
        <div inert class="toast__icon" aria-hidden="true">${this._iconForType(this.type)}</div>
        <div class="toast__content">
          <div class="toast__title">${this.title}</div>
          <p class="toast__message">${this.message}</p>
        </div>
        <div class="toast__actions">
          <button class="toast__close" aria-label="Dismiss notification">${V}</button>
        </div>
      </div>
      <div inert class="toast__timebar" aria-hidden="true">
        <div class="progress"></div>
      </div>
    `;const s=t.querySelector(".progress");s.style.background="linear-gradient(90deg, rgba(255,255,255,0.12), rgba(255,255,255,0.02)), var(--accent)",s.style.animation=`deplete ${this.duration}ms linear forwards`,this.el=t,this.progressEl=s,this.closeBtn=t.querySelector(".toast__close")}_wireEvents(){this._mouseenter=()=>this.pause("hover"),this._mouseleave=()=>this.resume("hover"),this._focus=()=>this.pause("focus"),this._blur=()=>this.resume("focus"),this.el.addEventListener("mouseenter",this._mouseenter),this.el.addEventListener("mouseleave",this._mouseleave),this.el.addEventListener("focusin",this._focus),this.el.addEventListener("focusout",this._blur),this.closeBtn.addEventListener("click",()=>this.remove()),this._keyHandler=t=>{t.key==="Escape"&&this.remove()},this.el.addEventListener("keydown",this._keyHandler)}_start(){this.startTime=performance.now(),this._setTimer(this.remaining)}_setTimer(t){this.timer&&clearTimeout(this.timer),this.timer=setTimeout(()=>this.remove(),t)}pause(t="manual"){if(this.pausedReasons.has(t)||!this.startTime)return;const s=performance.now()-this.startTime;this.remaining=Math.max(0,this.remaining-s),this.pausedReasons.add(t),this.timer&&(clearTimeout(this.timer),this.timer=null),this.el.classList.add("paused"),this.startTime=null}resume(t="manual"){this.pausedReasons.has(t)&&(this.pausedReasons.delete(t),!(this.pausedReasons.size>0)&&(this.startTime=performance.now(),this._setTimer(this.remaining),this.el.classList.remove("paused")))}remove(t=!1){if(!this.el)return this.promise;this.timer&&clearTimeout(this.timer),this.timer=null;const s=()=>{try{this._teardown()}catch{}this._resolveRemoved()};if(t)this.el.remove(),s(),this.el=null;else{this.el.classList.remove("show"),this.el.classList.add("hide");const i=n=>{n.target===this.el&&(this.el.removeEventListener("transitionend",i),this.el&&this.el.remove(),s(),this.el=null)};this.el.addEventListener("transitionend",i),setTimeout(()=>{if(this.el){try{this.el.remove()}catch{}s(),this.el=null}},600)}return this.promise}_teardown(){this.el&&(this.el.removeEventListener("mouseenter",this._mouseenter),this.el.removeEventListener("mouseleave",this._mouseleave),this.el.removeEventListener("focusin",this._focus),this.el.removeEventListener("focusout",this._blur),this.el.removeEventListener("keydown",this._keyHandler),this.timer&&clearTimeout(this.timer))}_iconForType(t){switch(t){case"success":return'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5"/></svg>';case"error":return'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-shield-alert-icon lucide-shield-alert"><path d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"/><path d="M12 8v4"/><path d="M12 16h.01"/></svg>';case"warn":return'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="12"/><line x1="12" x2="12.01" y1="16" y2="16"/></svg>';case"info":return'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-info-icon lucide-info"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>';default:return""}}}const G=new Y;function f(e){return G.show(e)}const I="products_json_cache",W=1800*1e3,Z="https://res.cloudinary.com/dxjjr0dte/raw/upload/tea-site-data/products.json",y="#product-modal",S=".custom-modal__content",Q="[data-modal-backdrop]",ee="[data-modal-close]",te=".product-slider",se=".product-slide-track",ie=".product-slide",ne=".product-prev",re=".product-next",oe=".modal__slider",ae=".modal__slide-track",le=".modal__slide",ce=".modal__slides-prev",de=".modal__slides-next";function ue(e,t=12){const s=new Set,i=n=>{n&&(Array.isArray(n)?n.forEach(o=>i(o)):n.toString().split(/\s+/).forEach(o=>{const r=o.toLowerCase().replace(/[^\u0600-\u06FF\w\-]+/g,"").trim();r&&r.length>1&&s.add(r)}))};return i(e.name),i(e.category),i(e.features),i(e.characteristics),i(e.weight),e.price!=null&&s.add(String(e.price)),Array.from(s).slice(0,t).join(", ")}function he(e){try{const t=new Set;(e||[]).forEach(n=>{!n||!n.visible||ue(n,20).split(",").map(o=>o.trim()).forEach(o=>{o&&t.add(o)})});const s=Array.from(t).slice(0,50).join(", ");let i=document.head.querySelector('meta[name="keywords"]');i||(i=document.createElement("meta"),i.setAttribute("name","keywords"),document.head.appendChild(i)),i.setAttribute("content",s)}catch(t){console.warn("updateGlobalKeywords error",t)}}function me(e,t){if(!t||!e||t.querySelector(".sr-only.product-structured"))return;const s=document.createElement("div");s.className="sr-only product-structured",s.setAttribute("itemscope",""),s.setAttribute("itemtype","https://schema.org/Product");const i=document.createElement("span");i.setAttribute("itemprop","name"),i.textContent=e.name||"",s.appendChild(i);const n=document.createElement("span");n.setAttribute("itemprop","description"),n.textContent=e.description||"",s.appendChild(n);const o=document.createElement("span");if(o.setAttribute("itemprop","category"),o.textContent=e.category||"",s.appendChild(o),e.price!=null){const c=document.createElement("div");c.setAttribute("itemprop","offers"),c.setAttribute("itemscope",""),c.setAttribute("itemtype","https://schema.org/Offer");const u=document.createElement("meta");u.setAttribute("itemprop","price"),u.content=String(e.price),c.appendChild(u);const d=document.createElement("meta");d.setAttribute("itemprop","priceCurrency"),d.content="IRR",c.appendChild(d),s.appendChild(c)}const r=[];if(Array.isArray(e.features)&&e.features.length&&r.push(`ویژگی‌ها: ${e.features.join(", ")}`),e.characteristics&&(Array.isArray(e.characteristics)&&e.characteristics.length?r.push(`مشخصات: ${e.characteristics.join(", ")}`):typeof e.characteristics=="string"&&e.characteristics.trim()&&r.push(`مشخصات: ${e.characteristics}`)),r.length){const c=document.createElement("span");c.setAttribute("itemprop","additionalProperty"),c.textContent=r.join(" • "),s.appendChild(c)}t.appendChild(s)}function pe(e){try{const t=(e||[]).filter(n=>n&&n.visible).map(n=>{const o={"@type":"Product",name:n.name,description:n.description||"",image:Array.isArray(n.image)?n.image:n.image?[n.image]:[],category:n.category||""};return n.price!=null&&(o.offers={"@type":"Offer",price:String(n.price),priceCurrency:"IRR"}),o});if(!t.length)return;let s=document.head.querySelector("#ld-products");const i={"@context":"https://schema.org","@graph":t};s?s.textContent=JSON.stringify(i,null,2):(s=document.createElement("script"),s.type="application/ld+json",s.id="ld-products",s.textContent=JSON.stringify(i,null,2),document.head.appendChild(s))}catch(t){console.warn("injectJsonLdForAllProducts error",t)}}async function P(){const e=document.querySelector("#products .product__items");try{const t=localStorage.getItem(I),s=Date.now();if(t){const c=JSON.parse(t);if(c.ts&&s-c.ts<W&&c.data){console.log("Using cached products"),T(c.data);return}}e&&O(e,6),console.log("Fetching fresh products.json from CDN...");const i=new AbortController,n=setTimeout(()=>i.abort(),1e4),o=await fetch(Z,{cache:"no-cache",signal:i.signal});if(clearTimeout(n),!o.ok)throw new Error(`HTTP error! Status: ${o.status}`);const r=await o.json();localStorage.setItem(I,JSON.stringify({ts:s,data:r})),e&&z(e),T(r);return}catch(t){console.error("Failed to load products:",t),e&&(e.innerHTML='<div class="load-error">مشکلی در بارگذاری محصولات به وجود آمد. <button id="retry-products" class="custom-btn-1">تلاش مجدد</button></div>',document.getElementById("retry-products")?.addEventListener("click",()=>P()),f({title:"خطا در اتصال",message:"بارگذاری اطلاعات محصولات ناموفق بود.",type:"error",duration:5e3}))}}function T(e){const t=document.querySelector("#products .product__items");if(!t){console.warn("generateProducts: #products .product__items not found in DOM.");return}if(t.innerHTML="",!Array.isArray(e)||e.length===0){console.warn("generateProducts: products.json is empty or not an array.");return}e.forEach(s=>{if(!s.visible)return;const i=document.createElement("div");i.className="product__item",i.innerHTML=`
            <div class="product__item__img">
                <div class="product__item__img__label">${s.category}</div>
                <div class="product-slider">
                  <div class="product-slides-container">
                    <div class="product-slide-track">
                      ${s.image.map(o=>`
                      <img class="product-slide lazy-loading" loading='lazy' src="" data-src="${o}" alt="${s.name}">
                      `).join("")}
                    </div>
                  </div>
                  <button class="product-prev"><span>&#10095;</span></button>
                  <button class="product-next"><span>&#10094;</span></button>
                </div>
            </div>
            <div class="product__item__info">
                <h3 class="product__item__info__title">${s.name}</h3>
                <p class="product__item__info__description">${s.description}</p>
                <div class="product__item__info__characteristics">
                  <div aria-label="package-icon" class="product__item__info__weight">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path
                        d="M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z">
                        </path>
                        <path d="M12 22V12"></path>
                        <path d="m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7"></path>
                        <path d="m7.5 4.27 9 5.15"></path>
                    </svg>
                    <span class="product__item__info__weight__title">${s.weight}</span>
                  </div>
                  <div class="product__item__info__price">
                  <span class="product__item__info__price__title" dir="ltr">${new Intl.NumberFormat("fa-IR",{maximumSignificantDigits:3}).format(s.price)}</span>
                  <span class="product__item__info__price__unit">تومان</span>
                  </div>
                </div>
                <button aria-label="eye-icon, show product details, open product modal" class="product__item__info__cta-details custom-btn-1" type="button" data-id="${s.id}" data-title="${s.name}">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path
                    d="M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0">
                    </path>
                    <circle cx="12" cy="12" r="3"></circle>
                </svg>
                مشاهده جزئیات
                </button>
    `,t.appendChild(i),new j(i.querySelectorAll(ie),i.querySelector(se),i.querySelector(ne),i.querySelector(re),i.querySelector(te),4e3),i.querySelector(".product__item__info__cta-details").addEventListener("click",o=>{o.preventDefault(),fe(s)}),me(s,i)}),he(e),pe(e)}function fe(e){const t=document.querySelector(y),s=document.querySelector(S);if(!t){console.warn("openProductModal: "+y+" not found.");return}t.setAttribute("aria-labelledby",e.name);const i=document.createElement("button");i.classList="custom-modal__close",i.type="button",i.setAttribute("aria-label","Close dialog"),i.setAttribute("data-modal-close",""),i.innerHTML=`
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
           <path d="M18 6 6 18"></path>
           <path d="m6 6 12 12"></path>
         </svg>
  `;const n=document.createElement("div");n.className="modal__image__section";const o=`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                  stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <circle cx="12" cy="12" r="10" />
                  <path d="m9 12 2 2 4-4" />
                </svg>`;n.innerHTML=`
        <div class="modal__slider">
          <div class="modal__slides-container">
            <div class="modal__slide-track">
              ${e.image.map(d=>`
                    <img class="modal__slide" loading='lazy' src="${d}" alt="${e.name}">
                `).join("")}
            </div>
            <button class="modal__slides-prev"><span>&#10094;</span></button>
            <button class="modal__slides-next"><span>&#10095;</span></button>
          </div>

          <div class="modal__slider-nav">

          </div>
        </div>
        `;const r=document.createElement("div");r.className="modal__product__details",r.innerHTML=`
        <h3 class="modal__product-title">${e.name}</h4>
          <p class="modal__product-desc">
            ${e.description}
          </p>
          <div class="modal__product-category-weight">
            <p class="modal__product-category">دسته بندی: <span>${e.category}</span></p>
            <p class="modal__product-weight">وزن: <span>${e.weight}</span></p>
          </div>
          <div class="modal__product-feats-chars__grid">
            <div class="modal__product-chars__section">
              <strong class="modal__product-chars-title">مشخصات</strong>
              <div class="modal__product-chars">
                ${e.characteristics.length==0?"مشخصاتی برای این محصول ثبت نشده است.":e.characteristics.map(d=>`
                              <div class="modal__product-characteristic">• ${d}</div>
                `).join("")}
              </div>
            </div>
            <div class="modal__product-feats__section">
              <strong class="modal__product-feats-title">ویژگی ها</strong>
              <div class="modal__product-feats">
              ${e.features.length==0?"برای این محصول ویژگی ای ثبت نشده است.":e.features.map(d=>`
                              <div aria-label="circle-checkmark-icon, product feature" class="modal__product-feature">
                              ${o}
                              ${d}
                              </div>
                `).join("")}
              </div>
            </div>
          </div>
          <div class="modal__price-cta">
            <a aria-label="tel-icon, contact to order" href="#contact" data-modal-close class="modal__product-contact custom-btn-1">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path
                  d="M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384">
                </path>
              </svg>
              <span>تماس برای سفارش</span>
            </a>
            <h4 class="modal__product-price">${new Intl.NumberFormat("fa-IR",{maximumSignificantDigits:3}).format(e.price)} تومان</h4>
          </div>
        `,L(),s.setAttribute("aria-label",`${e.name} modal`),s.appendChild(i),s.appendChild(n),new D(n.querySelectorAll(le),n.querySelector(ae),n.querySelector(ce),n.querySelector(de),n.querySelector(oe),4e3),s.appendChild(r),ge(),t.classList.add("open"),s.classList.add("fadeInDown-animation","animation"),t.setAttribute("aria-hidden","false"),t.removeAttribute("inert");const c=t.querySelector(S),u=ve(c)||c;try{u.focus()}catch{}}function b(){const e=document.querySelector(y);if(!e){console.warn("closeProductModal: "+y+" not found.");return}const t=document.querySelector(S);C(),e.classList.remove("open"),t.classList.remove("fadeInDown-animation","animation"),t.textContent="",e.setAttribute("aria-hidden","true"),e.setAttribute("inert","")}function ve(e){if(!e)return null;const t=e.querySelectorAll('a[href], button:not([disabled]), textarea:not([disabled]), input:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex="-1"])');return t.length?t[0]:null}function _e(e){const t=document.querySelector(y);if(!t||!t.classList.contains("open"))return;const s=t.querySelector(S),i=Array.from(s.querySelectorAll('a[href], button:not([disabled]), textarea:not([disabled]), input:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex="-1"])')).filter(r=>r.offsetParent!==null);if(i.length===0){document.activeElement!==s&&s.focus(),e.key==="Tab"&&e.preventDefault();return}const n=i[0],o=i[i.length-1];!e.shiftKey&&e.target===o&&e.key==="Tab"?(e.preventDefault(),n.focus()):e.shiftKey&&e.target===n&&e.key==="Tab"&&(e.preventDefault(),o.focus())}function ge(){const e=document.querySelector(y);if(!e)return;e.querySelectorAll(ee).forEach(s=>s.addEventListener("click",()=>b()));const t=e.querySelector(Q);t?t.addEventListener("click",()=>b()):e.addEventListener("click",s=>{const i=e.querySelector(S);s.target===e&&b(),i&&!i.contains(s.target)&&b()}),document.addEventListener("keydown",s=>{e.classList.contains("open")&&(s.key==="Escape"?(s.preventDefault(),b()):s.key==="Tab"&&_e(s))}),e.classList.contains("open")?(e.setAttribute("aria-hidden","true"),e.setAttribute("inert","")):(e.setAttribute("aria-hidden","false"),e.hasAttribute("inert")&&e.removeAttribute("inert"))}const q="contacts_json_cache",ye=1800*1e3,be="https://res.cloudinary.com/dxjjr0dte/raw/upload/tea-site-data/contacts.json";async function B(){const e=document.querySelector(".contact__info__items"),t=document.querySelector(".footer__contact__items"),s=document.querySelector(".header__socials"),i=document.querySelector(".mobile-nav__socials");try{const n=localStorage.getItem(q),o=Date.now();if(n){const p=JSON.parse(n);if(p.ts&&o-p.ts<ye&&p.data){console.log("Using cached contacts"),$(p.data);return}}U(e,t,s,i,6);const r=new AbortController,c=setTimeout(()=>r.abort(),8e3);console.log("Fetching fresh contacts.json from CDN...");const u=await fetch(be,{cache:"no-cache",signal:r.signal});if(clearTimeout(c),!u.ok)throw new Error(`HTTP error! Status: ${u.status}`);const d=await u.json();localStorage.setItem(q,JSON.stringify({ts:o,data:d})),J(e),$(d);return}catch(n){console.error("Failed to load contacts:",n),e&&(e.innerHTML='<div class="load-error">خطا در بارگذاری راه های ارتباطی. <button id="retry-contacts" class="custom-btn-1">تلاش مجدد</button></div>',document.getElementById("retry-contacts")?.addEventListener("click",()=>B())),f({title:"خطا در اتصال",message:"بارگذاری راه های ارتباطی ناموفق بود.",type:"error",duration:5e3})}}function $(e){const t=document.querySelector(".contact__info__items"),s=document.querySelector(".footer__contact__items"),i=document.querySelector(".footer__social__items"),n=document.querySelector(".header__socials"),o=document.querySelector(".mobile-nav__socials");t&&(t.textContent=""),s&&(s.textContent=""),i&&(i.textContent=""),n&&(n.textContent=""),o&&(o.textContent=""),e.forEach(r=>{if(!r.visible)return;const c=Se(r),u=c&&/^https?:\/\//.test(c),d=document.createElement("a");if(d.className="contact__info__item",d.setAttribute("aria-label",r.name+" "+r.value),d.href=c||"#",u&&(d.target="_blank"),d.rel="noopener noreferrer",d.innerHTML=`
      <div class="contact__info__item__info"> 
        <div aria-label="${r.type}-icon" class="contact__info__item__img">${r.svg}</div>
                <div class="contact__info__item__desc">
                  <h4 class="contact__info__item__desc__title">${r.name}</h4>
                  <p class="contact__info__item__desc__subtitle" dir="${r.valueDir}">${r.value}</p>
                </div>
      </div>
      <button class="contact__info__item__copy" aria-label="کپی">کپی</button>
        `,d.querySelector(".contact__info__item__copy").addEventListener("click",m=>{if(m.preventDefault(),navigator.clipboard&&navigator.clipboard.writeText){const a=`<span dir="${r.valueDir}">${r.value}</span>`;navigator.clipboard.writeText(r.value).then(f({title:"کپی شد!",message:`متن '${a}' در کلیپ بورد شما کپی شد.`,type:"info",duration:3e3}))}else{const a=document.createElement("textarea");a.value=text,a.setAttribute("readonly",""),a.style.position="absolute",a.style.left="-9999px",document.body.appendChild(a),a.select();try{const l=document.execCommand("copy");f(l?{title:"کپی شد!",message:`متن '${r.value}' در کلیپ بورد شما کپی شد.`,type:"info",duration:3e3}:{title:"کپی نشد!",message:"کپی شکست خورد.",type:"error",duration:5e3})}catch(l){f({title:"کپی نشد!",message:`کپی شکست خورد.<br>${l}`,type:"error",duration:5e3}),console.error(`Copying ${r.value} failed. -> ${l}`)}document.body.removeChild(a)}}),t.appendChild(d),r.type=="telegram"||r.type=="whatsapp"||r.type=="instagram"){const m=E(r,"footer__social__item",c,u);m.innerHTML=r.svg,i.appendChild(m);const a=E(r,"header__social__item",c,u);a.innerHTML=r.svg,n.appendChild(a);const l=E(r,"mobile-nav__social__item",c,u);l.innerHTML=r.svg,o.appendChild(l)}else{const m=E(r,"footer__contact__item",c,u);m.innerHTML=`
            ${r.svg}
            <span dir="${r.valueDir}">${r.value}</span>
        `,s.appendChild(m)}})}function E(e,t,s,i){const n=document.createElement("a");return n.classList=t,n.setAttribute("aria-label",e.name+" "+e.value),n.href=s||"#",i&&(n.target="_blank"),n.rel="noopener noreferrer",n}function Se(e){if(!e||!e.type)return null;switch(e.type){case"tel":return`tel:${String(e.value).replace(/\s+/g,"")}`;case"email":return`mailto:${e.value}`;case"instagram":{const t=String(e.value).replace(/^@+/,"").trim();return t?`https://instagram.com/${encodeURIComponent(t)}`:null}case"telegram":{const t=String(e.value).replace(/^@+/,"").trim();return t?`https://t.me/${encodeURIComponent(t)}`:null}case"whatsapp":{const t=String(e.value).replace(/^@+/,"").trim();return t?`https://wa.me/${encodeURIComponent(t)}`:null}case"address":return`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(e.value)}`;case"workhour":return null;default:return null}}function we(){const e=document.getElementById("orderForm");if(!e)return;e.setAttribute("novalidate","novalidate");const t={shopName:e.querySelector('[name="entry.2033700216"]'),phone:e.querySelector('[name="entry.68392148"]'),products:e.querySelector('[name="entry.1952081265"]'),address:e.querySelector('[name="entry.1217595251"]'),notes:e.querySelector('[name="entry.422124854"]'),honeypot:e.querySelector('[name="hidden_hp"]')};function s(a){const l=a.closest(".contact__form__item");return l?l.querySelector(".field-error"):null}function i(a,l){const h=s(a);h&&(h.textContent=l),a.setAttribute("aria-invalid","true")}function n(a){const l=s(a);l&&(l.textContent=""),a.removeAttribute("aria-invalid")}function o(){Object.values(t).forEach(a=>{a&&a.tagName&&n(a)})}function r(a){if(a==null)return"";let l=String(a).trim();return l.startsWith("+")&&(l=l.slice(1)),l=l.replace(/\D/g,""),l.startsWith("00")&&(l=l.replace(/^00/,"")),l}function c(a){return a?!!(/^98(9\d{9})$/.test(a)||/^09(9\d{9})$/.test(a)||/^9\d{9}$/.test(a)):!1}function u(a){return!a||c(a)?!1:!!(/^0\d{9,10}$/.test(a)||/^98\d{9,11}$/.test(a)||/^\d{7,8}$/.test(a))}function d(a){const l=r(a);return l?c(l)?{ok:!0,type:"mobile",normalized:l}:u(l)?{ok:!0,type:"landline",normalized:l}:{ok:!1,message:"فرمت شماره تماس معتبر نیست. مثال‌های مجاز: ...0912, ...912, ...912 98+, 02112345678"}:{ok:!1,message:"شماره تماس را وارد کنید."}}function p(a,l=250){let h=null;return function(...w){clearTimeout(h),h=setTimeout(()=>a.apply(this,w),l)}}const m=t.phone;if(m){const l=p(()=>{const h=d(m.value);h.ok?n(m):i(m,h.message)},200);m.addEventListener("input",l),m.addEventListener("blur",()=>{const h=d(m.value);h.ok?n(m):(i(m,h.message),f({title:"شماره نامعتبر",message:'فرمت شماره تماس معتبر نیست. مثال های مجاز:  <span dir="ltr">0912... - 912... - +98 912... - 02112345678</span>',type:"warn",duration:4e3}))})}["shopName","products","address","notes"].forEach(a=>{const l=t[a];l&&l.addEventListener("input",()=>n(l))}),e.addEventListener("submit",function(a){if(t.honeypot&&t.honeypot.value.trim()){a.preventDefault(),f({title:"خطا",message:"عملیات به دلیل شناسایی اسپم انجام نشد.",type:"error",duration:5e3});return}o();let l=!0,h=null;(!t.shopName||!t.shopName.value.trim())&&(i(t.shopName,"نام فروشگاه را وارد کنید."),l=!1,h=h||t.shopName);const w=d(t.phone?t.phone.value:"");if(w.ok||(i(t.phone,w.message),l=!1,h=h||t.phone),(!t.products||!t.products.value.trim()||t.products.value.trim().length<3)&&(i(t.products,"محصول/مقدار را بنویسید. (حداقل 3 حرف)"),l=!1,h=h||t.products),(!t.address||!t.address.value.trim()||t.address.value.trim().length<5)&&(i(t.address,"آدرس را کامل وارد کنید. (حداقل 5 حرف)"),l=!1,h=h||t.address),!l){a.preventDefault(),h&&typeof h.focus=="function"&&h.focus();const F=s(h)?.textContent||"لطفاً موارد خواسته شده را تکمیل کنید.";f({title:"خطا",message:F,type:"error",duration:4500});return}const k=this.querySelector('button[type="submit"]');k&&(k.disabled=!0),setTimeout(()=>{f({title:"سفارش دریافت شد",message:"ممنون از اینکه ما را انتخاب کردید🙇.<br> در ظرف 24 ساعت با شما تماس خواهیم گرفت.",type:"success",duration:5e3}),k&&(k.disabled=!1),this.reset(),o()},1200)})}const x=document.querySelector(".header__bars"),_=document.querySelector(".mobile-nav__menu"),ke="[data-mobile-nav-close]";function Ee(){_.classList.add("show"),x.setAttribute("aria-expanded","true"),_.setAttribute("aria-hidden","false"),_.hasAttribute("inert")&&_.removeAttribute("inert"),L()}function Ae(){_.classList.remove("show"),x.setAttribute("aria-expanded","false"),_.setAttribute("aria-hidden","true"),_.setAttribute("inert",""),C()}function xe(){x.addEventListener("click",()=>Ee()),document.querySelectorAll(ke).forEach(e=>{e.addEventListener("click",()=>Ae())}),_.setAttribute("inert",""),_.setAttribute("aria-hidden","true")}const Le=document.querySelector(".footer.lazy-background"),Ce=document.querySelectorAll(".lazy-background"),Ie=document.querySelector(".footer-sentinel");function Te(){const e=document.querySelectorAll(".lazy-loading");Ce.forEach(t=>!t.classList.contains("footer")&&M.observe(t)),M.observe(Ie),e.forEach(t=>qe.observe(t))}const M=new IntersectionObserver((e,t)=>{e.forEach(s=>{s.isIntersecting&&(s.target.className==="footer-sentinel"?Le.classList.remove("lazy-background"):s.target.classList.remove("lazy-background"),t.unobserve(s.target))})},{rootMargin:"200px 0px",threshold:.01}),qe=new IntersectionObserver((e,t)=>{e.forEach(s=>{if(s.isIntersecting){let i=s.target;i.classList.remove("lazy-loading"),i.src=i.dataset.src,t.unobserve(i)}})},{threshold:.05,rootMargin:"0px"}),$e=document.querySelectorAll(".section");function Me(){$e.forEach(e=>{e.classList.add("enter-from-bottom"),Ne.observe(e)})}const Ne=new IntersectionObserver((e,t)=>{e.forEach(s=>{const i=s.target;s.isIntersecting&&(i.classList.add("show"),t.unobserve(i))})},{threshold:.01,rootMargin:"0px 0px -20% 0px"}),g=document.querySelector(".scroll-top");document.addEventListener("DOMContentLoaded",async()=>{Be(),xe(),await P(),await B(),Te(),Me(),we()});let A=!1;function Pe(){A||(A=!0,requestAnimationFrame(()=>{window.scrollY>50?Fe(g):je(g),A=!1}))}function Be(){g&&(g.setAttribute("aria-hidden","true"),g.setAttribute("inert",""),g.setAttribute("tabindex","-1")),window.addEventListener("scroll",Pe,{passive:!0}),g?.addEventListener("click",e=>{e.preventDefault(),window.matchMedia("(prefers-reduced-motion: reduce)").matches?window.scrollTo(0,0):window.scrollTo({top:0,behavior:"smooth"}),g.blur()})}function Fe(e){e.classList.contains("visible")||(e.classList.add("visible"),e.setAttribute("aria-hidden","false"),e.removeAttribute("inert"),e.removeAttribute("tabindex"))}function je(e){e.classList.contains("visible")&&(e.classList.remove("visible"),e.setAttribute("aria-hidden","true"),e.setAttribute("inert",""),e.setAttribute("tabindex","-1"),e.blur())}const De=document.querySelectorAll("section"),He=document.querySelectorAll("header nav a"),Re=document.querySelectorAll(".mobile-nav__link");function Oe(){let e="";De.forEach(t=>{const s=t.offsetTop,i=t.clientHeight;pageYOffset>=s-i/3&&(e=t.getAttribute("id"))}),He.forEach(t=>{t.classList.remove("active"),t.getAttribute("href")===`#${e}`&&t.classList.add("active")}),Re.forEach(t=>{t.classList.remove("active"),t.getAttribute("href")===`#${e}`&&t.classList.add("active")})}window.addEventListener("scroll",Oe);const v=document.querySelector(".header");document.querySelector(".footer");const N=document.querySelector(".main-content"),ze=document.querySelector(".footer-sentinel");function Ke(e){return e?e.querySelector('a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])'):null}const Ue=new IntersectionObserver(e=>{e.forEach(t=>{t.isIntersecting?Je():Ve()})},{root:null,threshold:0});Ue.observe(ze);function Je(){if(v.classList.contains("hidden"))return;const e=document.activeElement;if(v.contains(e)){const t=Ke(N)||N;try{t.focus({preventScroll:!0})}catch{}}v.classList.add("hidden"),v.setAttribute("aria-hidden","true"),v.setAttribute("inert","")}function Ve(){v.classList.contains("hidden")&&(v.classList.remove("hidden"),v.setAttribute("aria-hidden","false"),v.removeAttribute("inert"))}function L(){document.body.setAttribute("data-scroll-locked","1"),document.body.style.overflow="hidden"}function C(){document.body.removeAttribute("data-scroll-locked"),document.body.style.removeProperty("overflow")}
